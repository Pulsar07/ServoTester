<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ServoTester: ServoTester, a Arduino project to verify RC-servo function / ein Arduino Projekt zur Überprüfung von RC-Servo Funktion</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ServoTester
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title"><a class="el" href="classServoTester.html" title="provides test and controlling functions for a combination of a RC-Servo and a optional mechanical cou...">ServoTester</a>, a Arduino project to verify RC-servo function / ein Arduino Projekt zur Überprüfung von RC-Servo Funktion </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="intro_sec_de"></a>
Einleitung</h1>
<p>Beim Erstflug eines 10kg Segler wurde das Modell plötzlich schneller. Steuerkorrekturen am HR-Hebel am Sender zeigten keinerlei Wirkung. Nach ca 20s verscchwand das Modell hinter der Hangkante. 3 Tage später konnte das Modell aus 20m Höhe von einem Baumkletter geborgen werden. Da der Rumpf annähernd unbeschädigt war, konnte die Fehleranalyse beginnen und bald war klar, es war der HR Servo. Der Servo lief eigentlich ganz gut, aber zeite plötzlich Aussetzer. Ein Y-Kabel vom Empfänger-HR-Ausgang zum HR-Servo und zu einem zweiten Referenzservo brachte endgültige Klarheit. Der eingebaute HR-Servo zeite sporadische Aussetzer, die der Referenzservo nicht zeigte. Ein sehr unangenehmer Fehler. Während der Bau- und Einstellzeit des Modells zeigten sich keinerlei Probleme und sporadische HR-Tests waren immer erfolgreich. So kam mir die Idee einen <a class="el" href="classServoTester.html" title="provides test and controlling functions for a combination of a RC-Servo and a optional mechanical cou...">ServoTester</a> zu bauen, der über einen längeren Zeitraum (2 Stunden) den Servo in unterschiedliche Positionen anfährt und die Servohebelposition überprüft.</p>
<h1><a class="anchor" id="intro_sec_en"></a>
Introduction</h1>
<p>At the first flight of a 10kg glider after about 70 minutes, the model slowly gots faster. Moving the elevator stick has no reaction. After about 20 seconds the model disappears at the hill side. 3 day later the model could be salvaged form the top of a tree. The fuselage was fortunately not damaged. The error analysis was completly clear: The servo for the elevator has dropouts. Not often but when moving the elevator stick I had the feeling the servo does sometimes not move correctly. Putting an Y-cable with a second servo connected to the elevator receiver output, showed the error clear. The elevator servo sometimes does not move. This is a very bad error. At the building and setup phase of the modell, I had no indication of this and a single or short movement test was always successful. So the idea of a servo tester, which runs a servo movement test procedure for a long time (2 hours) and a continous servo position check to verify the correct position was born.</p>
<h1><a class="anchor" id="concept_sec_de"></a>
Konzept</h1>
<p>Die Konzeptidee ist sehr einfach. Der Mikrokontroller, sendet ordentliche PWM Servosignale (1.0us - 2.0us Impulse) an einem digitalen Ausgang. So kann der Servo gesteuert werden. Der Positions-Sensor/-Potentionmeter ist ein Spannungsteiler, dessen Spannung am Pin des beweglichen Teils eine Indikator für die Position ist. Der Arduino hat einige einfach ADSc (Auflösung 1024), die benutzt werden können um diese Spannung zu messen. Ein weiterer Spannungsteiler unterstützt als Sicherheitscheck eine Batterieunterspannungs-Warnung/-Abschaltung und 2 LED sorgen als einfache Status Melder. Die Logic ist als Arduino Sketch A separate voltage divider can provide a safety check for a battery low voltage warning/shutdown and 2 LEDs are used as simple status indication. Zusätzlich werden an der USB-Schnittstelle Textnachrichten ausgegeben. Die Verarbeitungslogik ist als Arduino Sketch in C++ hier hinterlegt.</p>
<h1><a class="anchor" id="concept_sec_en"></a>
Concept</h1>
<p>The concept of the project is simple. The microcontroller, is able to send valid PWM servo signals (1.0us - 2.0us pulses), to a digital output. So the servo can be controlled. The postition sensor/potentionmeter is a voltage divider, the voltage at the moving pin is an indicator for the position. The microcontroller has some build in simple ADCs (1024 resolution), which can be used to measure this voltage. A separate voltage divider can provide a safety check for a battery low voltage warning/shutdown and 2 LEDs are used as simple status indication. Additionally there are text messages sent to the USB interface. The logic is build as Arduino sketch based on C++ code as given here.</p>
<h1><a class="anchor" id="hardware_sec_de"></a>
Hardware</h1>
<p>Außer einem Arduino Nano, ist nicht viel notwendig. Zwei Status LEDs, um ein simple Benutzerinterface zu realisieren und ein hochwertiges Cermet Potentiometer, das als Positionssensor dient und mechanisch mit dem Servoarm des Servos verbunden ist. Dazu kommen noch ein paar Widerstände und ein Kondensator, wie im Schaltplan dargestellt.</p>
<h1><a class="anchor" id="hardware_sec_en"></a>
Hardware</h1>
<p>in addition to the Arduino nano hardware only some electronic parts are needed to create a human machine interface (only 2 status LEDs) and a high quality potentiometer (Cermet precision potentiometer) is needed as a position sensor, which is mechanical connected to the RC-servo. Some resistors and a capacitor as shown in the circuit diagram.</p>
<h1><a class="anchor" id="composition_sec"></a>
Aufbau/Composition</h1>
<div class="image">
<img src="ServoTesterAufbau.jpg" alt="ServoTesterAufbau.jpg"/>
</div>
<h1><a class="anchor" id="circuit_diagram_sec"></a>
Schaltplan / Circuit diagram</h1>
<div class="image">
<img src="SchaltplanServoTester_HW1.png" alt="SchaltplanServoTester_HW1.png"/>
</div>
<h1><a class="anchor" id="hmi_sec_de"></a>
Benutzerschnittstelle - Textnachrichten</h1>
<p>Der Arduino gibt detaillierte Benutzernachrichten an der seriellen Schnittstelle (USB) aus. Wenn der Arduino über die USB-Schnittstelle an einen PC angeschlossen wird und ein Programm zur Kommunikation mit der seriellen Schnittstelle verfügbar (minicom/putty/ArduinoIDE-Serial monitor) ist, kann bei einer Baud-Rate von 57600 baud mitgelesen werden.</p>
<h1><a class="anchor" id="hmi_sec_en"></a>
human machine interface - text output</h1>
<p>The Arduino will give usefull detailed information on the serial output. So if you connect the Arduions USB connectior with your PC and you have a serial communication programm like minicom/putty or so with a baud rate of 57600 you can see this detailed information</p>
<h1><a class="anchor" id="hmiled_sec_de"></a>
Benutzerschnittstelle - 2 Status LEDs</h1>
<ul>
<li>grüne und rote LED blinken synchron: <a class="el" href="classServoTester.html" title="provides test and controlling functions for a combination of a RC-Servo and a optional mechanical cou...">ServoTester</a> ist in Initialisierung</li>
<li>grüne und rote LED blinken abwechselnd: <a class="el" href="classServoTester.html" title="provides test and controlling functions for a combination of a RC-Servo and a optional mechanical cou...">ServoTester</a> ist in Initialisierung und hat temporären Probleme:<ul>
<li>obwohl der Servo-Hebel in Mittelstellung ist, ist der Positionssensor nicht in Mittelstellung (Gestänge stimmt nicht und/oder Servohebel zeigt in Mittelstellung nicht senkrecht nach oben )</li>
<li>obwohl sich der Servo-Hebel leicht bewegt, kann diese Bewegung am Positionssensor nicht detektiert werden.</li>
</ul>
</li>
<li>grün blink langsam (1.5s): es ist ein nicht behebarer Fehler während der Initialisierung aufgetreten, Test wird nicht gestartet. Neutstart durch Reset-Button oder Stromzufuhr.</li>
<li>grün leuchtet dauerhaft: Test Prozedur läuft normal</li>
<li>rot blinkt, während grün dauerhauft leuchet: Jeder rote Blinkzyklus entspricht einer fehlerhaften Positionsprüfung. Das sollte bei einem funktionierndem Servo und einer ordentlichen mechanischen Verbindung Servo-Sensor nicht auftreten.</li>
<li>grün leuchtet, hat aber kurze (0.5s) Aus-Phasen: Test Prozedor ist beendet.<ul>
<li>rot is dabei Aus: Test wurde erfolgreich beendet ohne Fehler</li>
<li>rot blinkt: Test wurde beendet mit Positionsfehler. Anzahl der Blink-Phase entspricht dem Anzahl an fehlerhaften Prüfungen.</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="hmiled_sec_en"></a>
human machine interface - 2 state LEDs</h1>
<ul>
<li>Green and Red LED blink synchronously: <a class="el" href="classServoTester.html" title="provides test and controlling functions for a combination of a RC-Servo and a optional mechanical cou...">ServoTester</a> is in initialization</li>
<li>Green and Red LED blink alternately: <a class="el" href="classServoTester.html" title="provides test and controlling functions for a combination of a RC-Servo and a optional mechanical cou...">ServoTester</a> is in initialization, with temporary problems :<ul>
<li>although the servo is in middle position, the servo position sensor is not (offset in mechanical coupling)</li>
<li>although the servo does move a little around the middle position, the servo position sensor does not dectect correct movement</li>
</ul>
</li>
<li>Green blinks slow (1.5s): there was an unrecoverable initialization fault, test procedure will not start</li>
<li>Green is on: Test procedure is running</li>
<li>Red blinks while Green is on: Each red blink cycle represents one failed position check. This should not happen for a correct operating servo and a valid mechanical connection between servo and sensor</li>
<li>Green is on, but there is a small (0.5s) off phase: Test is finished.<ul>
<li>Red is off: Test is finished without an position error</li>
<li>Red blinks: Test is finished with an position error(s). Count of blink phases indicates the error count</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="usagee_sec_de"></a>
Bedienerhinweise</h1>
<p>Der <a class="el" href="classServoTester.html" title="provides test and controlling functions for a combination of a RC-Servo and a optional mechanical cou...">ServoTester</a> muss an eine 2s LiIon Batterie angeschlossen werden. Die Nutzung eines Labornetzgerätes ist sinnvoll, jedoch ist darauf zu achten, dass nicht mehr als 8.4V Spannung angelegt wird und dass die Stromstärke &lt;1A eingestellt wird, das beim Servo-Speed-Test hohe Ströme (je nach Servo) angefordert werden. Der Arduino Nano kann optional via der USB Schnittstelle mit einem PC verbunden werden, um neue Firmware auf den Arduino zu laden oder um Textnachrichten an einen seriellen Monitor zu übertragen. Wenn die Batterie mit dem <a class="el" href="classServoTester.html" title="provides test and controlling functions for a combination of a RC-Servo and a optional mechanical cou...">ServoTester</a> verbunden wird, wird :</p><ul>
<li>der Servo in Mittelposition gefahren.</li>
<li>wenn der Positionssensor die Mittelposition dedektiert, wird durch eine leichte Bewegung des Servos, die Bewegung des Sensors getestet.</li>
<li>in dieser Phase kann der Servohebel in der korrekten Position auf die Achse montiert werden.</li>
<li>im nächsten Schritt werden die Servopositionen (+/-100%) kalibriert.</li>
<li>danach wird ein Servo-Speedtest durchgeführt, bei dem der Servo von 0% auf +/-100% in maximaler Geschwindigkeit gefahren wird. Die Zeit bis zum Erreichen der Endposition wird als Textnachricht ausgegeben.</li>
</ul>
<h1><a class="anchor" id="usagee_sec_en"></a>
Operation manual</h1>
<p>The tester has to be connected to a 2s LiIon battery. Optional the Arduino can be connectd via the USB interface to upload new firmware or to transfer textual information, about the servo test. When the battery is connected the <a class="el" href="classServoTester.html" title="provides test and controlling functions for a combination of a RC-Servo and a optional mechanical cou...">ServoTester</a>, first does:</p><ul>
<li>set the servo to middle positions, if the sensor is not in middle position an temporary error is indicated. Move arm and lever to middle position</li>
<li>if the sensor middle position is dedected, the <a class="el" href="classServoTester.html" title="provides test and controlling functions for a combination of a RC-Servo and a optional mechanical cou...">ServoTester</a> does some smooth servo movement and tests if the movement is dedected at the sensor.</li>
<li>in this phase you can mount the servo arm in the right position to the servo shaft.</li>
<li>the next step is calibration of the servo movement (+/-100%)</li>
<li>after this, a servo speed test is done, which moves the servo from 0% to +/-100% at maximum speed. The time till reaching the end positions is measured and given as a text message. </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
